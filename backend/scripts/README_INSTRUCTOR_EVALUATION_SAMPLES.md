# 授课人课程评价示例数据脚本

## 功能说明

这个脚本用于为授课人课程评价功能创建测试数据，包括：
- 已完成的课程排课记录
- 学员预订记录
- 课程评价数据（包含评分）

## 使用方法

```bash
cd backend
node scripts/insert-instructor-evaluation-samples.js
```

## 创建的数据

### 1. 课程数据
- 为指定授课人（默认ID=3）创建或使用现有课程
- 如果没有课程，会自动创建2个示例课程：
  - 高效时间管理 (TIME001)
  - 职业规划与发展 (CAREER001)

### 2. 排课数据
- 每门课程创建 **5期** 已完成的排课
- 排课日期分布在过去的35天内（每7天一期）
- 所有排课状态为 `completed`，并已触发问卷

### 3. 评价数据
- 每期排课创建 **3个评价**
- 每期由3个不同的测试会员用户提交评价
- 评分设计：
  - **早期评分较低**（约3.5分）
  - **后期评分逐渐提升**（约4.7分）
  - 模拟课程质量改进的过程

### 4. 评分计算逻辑

#### 本期评分
- 取最近一期（第5期）的所有评价
- 每个评价计算 Q1-Q4 和 Q9 的平均分
- 再对所有评价求平均

#### 近3期平均
- 取最近3期（第3-5期）的所有评价
- 同样计算每个评价的平均分
- 再对所有评价求平均

## 评分示例

假设创建的5期排课的评价平均分如下：
- 第1期：3.5分
- 第2期：3.8分
- 第3期：4.1分（计入近3期平均）
- 第4期：4.4分（计入近3期平均）
- 第5期：4.7分（计入本期评分和近3期平均）

结果：
- **本期评分**：4.7
- **近3期平均**：(4.1 + 4.4 + 4.7) / 3 ≈ 4.4

## 查看结果

在小程序中查看：
1. 登录授课人账号（ID=3）
2. 进入【我的】页面
3. 点击【授课人专区】
4. 点击【课程评价】
5. 查看每门课程的"本期评分"和"近3期平均"

## API 测试

```bash
# 获取授课人课程评价列表
curl "http://localhost:3000/api/evaluations/instructor/courses?instructor_id=3"
```

## 注意事项

1. 运行脚本前请确保：
   - 数据库连接正常
   - 存在授课人用户（默认ID=3）
   - 存在至少一个课程主题

2. 如果已有课程和评价数据，脚本会使用现有数据并添加新的排课和评价

3. 评分会根据随机因素略有变化（±0.2分），模拟真实评价情况




























































