<!--pages/instructor-profile/instructor-profile.wxml-->
<view class="container">
  <view class="profile-header" wx:if="{{instructorInfo}}">
    <view class="instructor-avatar" bindtap="{{isOwnProfile ? 'chooseAvatar' : ''}}">
      <image wx:if="{{instructorInfo.avatar_url}}" src="{{instructorInfo.avatar_url}}" mode="aspectFill"></image>
      <text wx:else class="avatar-text">{{instructorInfo.nickname ? instructorInfo.nickname[0] : 'I'}}</text>
      <view class="avatar-upload-hint" wx:if="{{isOwnProfile}}">
        <text class="upload-icon">ğŸ“·</text>
        <text class="upload-text">ç‚¹å‡»ä¸Šä¼ </text>
      </view>
    </view>
    <view class="instructor-name">{{instructorInfo.nickname || 'æœªè®¾ç½®æ˜µç§°'}}</view>
  </view>

  <view class="profile-header" wx:else>
    <view class="instructor-avatar">
      <text class="avatar-text">I</text>
    </view>
    <view class="instructor-name">åŠ è½½ä¸­...</view>
  </view>

  <view class="info-section" wx:if="{{instructorInfo}}">
    <view class="section-header">
      <view class="section-title">è®²æˆè¯¾ç¨‹</view>
    </view>
    <view class="courses-list">
      <view wx:if="{{coursesList.length > 0}}">
        <view class="course-item" wx:for="{{coursesList}}" wx:key="id">
          <view class="course-title">{{item.title}}</view>
          <view class="course-subtitle" wx:if="{{item.subtitle}}">{{item.subtitle}}</view>
        </view>
      </view>
      <view wx:else class="empty-courses">
        <text>æš‚æ— è®²æˆè¯¾ç¨‹</text>
      </view>
    </view>
  </view>

  <view class="info-section" wx:if="{{instructorInfo}}">
    <view class="section-header">
      <view class="section-title">ä¸ªäººèƒŒæ™¯ä»‹ç»</view>
      <view class="edit-btn" wx:if="{{isOwnProfile && editingSection !== 'background'}}" bindtap="editBackground">
        <text class="edit-icon">âœï¸</text>
        <text class="edit-text">ç¼–è¾‘</text>
      </view>
    </view>
    <view wx:if="{{editingSection === 'background'}}" class="edit-container">
      <textarea 
        class="edit-textarea" 
        value="{{editBackground}}"
        placeholder="è¯·è¾“å…¥ä¸ªäººèƒŒæ™¯ä»‹ç»"
        bindinput="onBackgroundInput"
        maxlength="500"
        show-confirm-bar="{{false}}"
        auto-height
      ></textarea>
      <view class="edit-actions">
        <button class="btn-cancel" bindtap="cancelEdit">å–æ¶ˆ</button>
        <button class="btn-save" bindtap="saveBackground">ä¿å­˜</button>
      </view>
    </view>
    <view wx:else class="content-text">{{instructorInfo.background || 'æš‚æ— ä¸ªäººèƒŒæ™¯ä»‹ç»'}}</view>
  </view>
  
  <view class="info-section" wx:else>
    <view class="content-text">åŠ è½½ä¸­...</view>
  </view>
</view>
